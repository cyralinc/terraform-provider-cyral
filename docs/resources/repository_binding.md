# cyral_repository_binding (Resource)

Manages [cyral repository to sidecar bindings](https://cyral.com/docs/sidecars/sidecar-assign-repo).

-> Import ID syntax is `{sidecar_id}/{binding_id}`.

## Example Usage

```terraform
resource "cyral_sidecar" "sidecar" {
  name = "my-sidecar"
  deployment_method = "terraform"
}

resource "cyral_repository" "repo_mongodb" {
  name = "my-mongodb-repo"
  type = "mongodb"
  repo_node {
    name = "single-node-mongo"
    host = "mongodb.cyral.com"
    port = 27017
  }
  mongodb_settings {
    server_type = "standalone"
  }
}

resource "cyral_repository" "repo_pg" {
  name = "my-pg-repo"
  type = "postgresql"
  repo_node {
    host = "pg.cyral.com"
    port = 5432
  }
}

resource "cyral_sidecar_listener" "listener_mongodb" {
  sidecar_id = cyral_sidecar.sidecar.id
  repo_types = ["mongodb"]
  network_address {
    port = 27017
  }
}

resource "cyral_sidecar_listener" "listener_pg" {
  sidecar_id = cyral_sidecar.sidecar.id
  repo_types = ["postgresql"]
  network_address {
    // clients will connect to the pg repo using sidecar port 5434
    port = 5434
  }
}

resource "cyral_repository_binding" "binding_mongodb" {
  sidecar_id = cyral_sidecar.sidecar.id
  repository_id = cyral_repository.repo_mongodb.id
  listener_binding {
    listener_id = cyral_sidecar_listener.listener_mongodb.listener_id
    node_index = 0 // optional if there is only one repo node
  }
}

resource "cyral_repository_binding" "binding_pg" {
  sidecar_id = cyral_sidecar.sidecar.id
  repository_id = cyral_repository.repo_pg.id
  listener_binding {
    listener_id = cyral_sidecar_listener.listener_pg.listener_id
  }
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

-   `listener_binding` (Block List, Min: 1) The configuration for listeners associated with the binding. At least one `listener_binding` is required. (see [below for nested schema](#nestedblock--listener_binding))
-   `repository_id` (String) ID of the repository that will be bound to the sidecar.
-   `sidecar_id` (String) ID of the sidecar that will be bound to the given repository.

### Optional

-   `enabled` (Boolean) Enable or disable all listener bindings.

### Read-Only

-   `binding_id` (String) ID of the binding. Computed and assigned to binding at the time of creation.
-   `id` (String) The ID of this resource.

<a id="nestedblock--listener_binding"></a>

### Nested Schema for `listener_binding`

Required:

-   `listener_id` (String) The sidecar listener that this binding is associated with.

Optional:

-   `node_index` (Number) The index of the repo node that this binding is associated with.
