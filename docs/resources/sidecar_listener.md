# cyral_sidecar_listener (Resource)

Manages [sidecar listeners](https://cyral.com/docs/sidecars/sidecar-listeners).

-> **NOTE** Import ID syntax is `{sidecar_id}/{listener_id}`.

## Example Usage

```terraform
resource "cyral_sidecar" "sidecar" {
  name              = "sidecar"
  deployment_method = "docker"
}

# Plain listener
resource "cyral_sidecar_listener" "listener" {
  sidecar_id = cyral_sidecar.sidecar.id
  repo_types = ["mongodb"]
  network_address {
    port = 27017
  }
}

# Listener with MySQL Settings
resource "cyral_sidecar_listener" "listener" {
  sidecar_id = cyral_sidecar.sidecar.id
  repo_types = ["mysql"]
  network_address {
    port = 3306
  }

  mysql_settings {
    db_version    = "3.4.0"
    character_set = "ujis_japanese_ci"
  }
}

# Listener with S3 Settings
resource "cyral_sidecar_listener" "listener" {
  sidecar_id = cyral_sidecar.sidecar.id
  repo_types = ["s3"]
  network_address {
    port = 443
  }
  s3_settings {
    proxy_mode = true
  }
}

# Listener with DynamoDB Settings
resource "cyral_sidecar_listener" "listener" {
  sidecar_id = cyral_sidecar.sidecar.id
  repo_types = ["dynamodb"]
  network_address {
    port = 8000
  }
  dynamodb_settings {
    proxy_mode = true
  }
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

- `network_address` (Block Set, Min: 1, Max: 1) The network address that the sidecar listens on. (see [below for nested schema](#nestedblock--network_address))
- `repo_types` (List of String) List of repository types that the listener supports. Currently limited to one repo type from supported repo types:
  - `denodo`
  - `dremio`
  - `dynamodb`
  - `dynamodbstreams`
  - `galera`
  - `mariadb`
  - `mongodb`
  - `mysql`
  - `oracle`
  - `postgresql`
  - `redshift`
  - `s3`
  - `snowflake`
  - `sqlserver`
- `sidecar_id` (String) ID of the sidecar that the listener will be bound to.

### Optional

- `dynamodb_settings` (Block Set, Max: 1) DynamoDB settings. (see [below for nested schema](#nestedblock--dynamodb_settings))
- `mysql_settings` (Block Set, Max: 1) MySQL settings represents the listener settings for a [`mysql`, `galera`, `mariadb`] data repository. (see [below for nested schema](#nestedblock--mysql_settings))
- `s3_settings` (Block Set, Max: 1) S3 settings. (see [below for nested schema](#nestedblock--s3_settings))

### Read-Only

- `id` (String) The ID of this resource.
- `listener_id` (String) ID of the listener that will be bound to the sidecar.

<a id="nestedblock--network_address"></a>

### Nested Schema for `network_address`

Required:

- `port` (Number) Port where the sidecar will listen for the given repository.

Optional:

- `host` (String) Host where the sidecar will listen for the given repository, in the case where the sidecar is deployed on a host with multiple network interfaces. If omitted, the sidecar will assume the default "0.0.0.0" and listen on all network interfaces.

<a id="nestedblock--dynamodb_settings"></a>

### Nested Schema for `dynamodb_settings`

Optional:

- `proxy_mode` (Boolean) DynamoDB proxy mode. Only relevant for listeners of type `dynamodb`. Note that `proxy_mode` must be set to `true` for listeners of type `dynamodb`. Defaults to false.

<a id="nestedblock--mysql_settings"></a>

### Nested Schema for `mysql_settings`

Optional:

- `character_set` (String) MySQL character set. Optional (and only relevant) for listeners of type `mysql`.
- `db_version` (String) MySQL DB version. Required (and only relevant) for listeners of type `mysql`.

<a id="nestedblock--s3_settings"></a>

### Nested Schema for `s3_settings`

Optional:

- `proxy_mode` (Boolean) S3 proxy mode, only relevant for S3 listeners. Defaults to false.
